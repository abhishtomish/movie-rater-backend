version: '3'

services:

  app:
      build: ./src
      restart: always
      env_file:
          - ./src/.env
      ports:
          - "8000:8000"
      volumes:
          - "./src/:/app/"
      command: bash -c "python manage.py migrate --no-input &&
                                      python manage.py runserver 0.0.0.0:8000"

  db:
      image: postgres:9.6
      restart: always
      volumes:
          - "./volumes/db:/var/lib/postgresql/data"